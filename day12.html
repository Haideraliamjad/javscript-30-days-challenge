<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error Handling in Javascript</title>
  </head>
  <body>
    <h1>Error Handling in Javascript</h1>
    <script>
      function errorFunc() {
        try {
          throw new Error("Custom Error");
        } catch (error) {
          console.log(error);
        }
      }
      errorFunc();

      function divide(a, b) {
        try {
          if (b == 0) throw new Error("invalid divisor");
          else {
            return a / b;
          }
        } catch (error) {
          console.log(error);
        }
      }
      divide(10, 0);

      // Activity 2
      try {
        console.log("Error Block");
      } catch (error) {
        console.log("Catch Block");
      } finally {
        console.log("Finally Block");
      }

      // Activity 3

      class CustomError extends Error {
        constructor(message, name) {
          super(message);
          this.name = name;
        }
      }

      try {
        throw new CustomError("Something went wrong!", "MyError");
      } catch (error) {
        console.error(`Caught ${error.name}: ${error.message}`);
      }

      function checkUserName(name) {
        try {
          if (name.length == 0) {
            throw new CustomError("Invalid Input", "username is empty");
          }
        } catch (error) {
          console.error(error.name);
        }
      }
      checkUserName("");

      const fetchUserFromApi = async () => {
        try {
          const data = await fetch(
            "https://jsonplaceholder.typicode.com/todo/1"
          );
          console.log(await data.json());
        } catch (error) {
          console.log("Fetch User Api Error");
        }
      };
      fetchUserFromApi();

      // fetch data using Promise in javascript
      const promise = fetch("https://jsonplaceholder.typicode.us/todos/1");
      promise
        .then((jsonbody) => jsonbody.json())
        .then((data) => console.log(data))
        .catch((err) => console.log(err));
    </script>
  </body>
</html>
